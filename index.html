<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FosterTrack Prototype</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    }

    body {
      margin: 0;
      background: #f4f4f4;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .phone {
      width: 390px;
      height: 844px;
      border-radius: 40px;
      border: 10px solid #000;
      background: #fff;
      overflow: hidden;
      position: relative;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
    }

    .screen {
      width: 100%;
      height: 100%;
      padding: 32px 24px 80px;
      display: none;
      position: absolute;
      top: 0;
      left: 0;
    }
    .screen.active { display: block; }

    h1, h2, h3 {
      margin: 0 0 24px;
      font-size: 22px;
    }

    label { font-size: 14px; display: block; margin-bottom: 4px; }

    input, textarea, select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background: #e6e6e6;
      font-size: 14px;
    }

    textarea { resize: none; min-height: 90px;}

    .row { display: flex; gap: 16px; margin-bottom: 16px; }
    .row > .field { flex: 1; }
    .field { margin-bottom: 16px; }

    .button-row {
      display: flex;
      justify-content: space-between;
      margin-top: 24px;
    }

    button {
      cursor: pointer;
      border-radius: 6px;
      border: none;
      padding: 10px 20px;
      font-size: 15px;
    }

    .btn-primary { background: #222; color: #fff; }
    .btn-secondary { background: #ddd; color: #111; }

    .cat-list {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .cat-card {
      display: flex;
      align-items: center;
      padding: 10px 12px;
      background: #e6e6e6;
      border-radius: 8px;
      cursor: pointer;
      gap: 10px;
    }

    .thumb {
      width: 60px;
      height: 60px;
      background: #c4c4c4;
      border-radius: 6px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .thumb.placeholder::before,
    .thumb.placeholder::after {
      content: "";
      position: absolute;
      width: 80%;
      height: 1px;
      background: #666;
      top: 50%; left: 50%;
      transform-origin: center;
    }

    .thumb.placeholder::before { transform: translate(-50%, -50%) rotate(45deg); }
    .thumb.placeholder::after  { transform: translate(-50%, -50%) rotate(-45deg); }

    .cat-name { font-size: 18px; font-weight: 600; }
    .cat-subinfo { font-size: 13px; color: #444; margin-top: 2px; }

    .delete-btn {
      margin-left: auto;
      border: none;
      background: none;
      color: #d11a2a;
      font-size: 14px;
      cursor: pointer;
    }

    .fab {
      position: absolute;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      width: 56px;
      height: 56px;
      border-radius: 12px;
      background: #e6e6e6;
      border: 1px solid #bbb;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .fab::before,
    .fab::after {
      content: "";
      position: absolute;
      background: #555;
    }
    .fab::before { width: 24px; height: 2px; }
    .fab::after { width: 2px; height: 24px; }

    .back-link {
      font-size: 15px;
      margin-bottom: 16px;
      cursor: pointer;
      color: #007aff;
    }

    /* ------------------ PHOTO UPLOAD ------------------ */

    .photo-preview {
      width: 150px;
      height: 150px;
      background: #d9d9d9;
      border-radius: 10px;
      margin: 0 auto 10px;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .photo-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .photo-preview.placeholder::before,
    .photo-preview.placeholder::after {
      content: "";
      position: absolute;
      width: 60%;
      height: 2px;
      background: #666;
      top: 50%;
      left: 50%;
    }
    .photo-preview.placeholder::before {
      transform: translate(-50%, -50%) rotate(45deg);
    }
    .photo-preview.placeholder::after {
      transform: translate(-50%, -50%) rotate(-45deg);
    }

    /* REMOVE THE BIG X FROM THUMB + PHOTO PREVIEW */
    .thumb.placeholder::before,
    .thumb.placeholder::after,
    .photo-preview.placeholder::before,
    .photo-preview.placeholder::after {
      content: none !important;
    }

    .choose-photo-btn {
      text-align: center;
      font-size: 14px;
      color: #007aff;
      cursor: pointer;
      margin-bottom: 20px;
    }

    .log-list {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .log-card {
      background: #e6e6e6;
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 14px;
    }

    .log-title { font-weight: 600; margin-bottom: 4px; }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 12px;
    }

    .pill {
      padding: 8px 12px;
      background: #e0e0e0;
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
      border: 1px solid transparent;
    }
    .pill.selected {
      border-color: #111;
      background: #d0d0d0;
    }
  </style>
</head>

<body>
<div class="phone">

  <!-- HOME -->
  <section class="screen active" id="screen-home">
    <h2>FosterTrack</h2>
    <p>Your foster cats:</p>
    <div class="cat-list" id="cat-list"></div>
    <div class="fab" id="btn-add-cat"></div>
  </section>

  <!-- ADD NEW CAT -->
  <section class="screen" id="screen-add-cat">
    <div class="back-link" data-back="home">‹ Back</div>
    <h2>Add a New Foster Cat</h2>

    <div class="photo-preview placeholder" id="cat-photo-preview"></div>
    <div class="choose-photo-btn" id="choose-photo-btn">Choose Photo</div>
    <input type="file" id="cat-photo-input" accept="image/*" style="display:none;" />

    <div class="row">
      <div class="field">
        <label>Name</label>
        <input id="cat-name" type="text" />
      </div>

      <div class="field">
        <label>Status</label>
        <select id="cat-status">
          <option value="In Foster">In Foster</option>
          <option value="Adopted">Adopted</option>
          <option value="Medical Hold">Medical Hold</option>
          <option value="Pending Adoption">Pending Adoption</option>
          <option value="Transferred">Transferred</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div class="field">
        <label>Intake Date</label>
        <input id="cat-intake" type="date" />
      </div>

      <div class="field">
        <label>Medications</label>
        <input id="cat-meds" type="text" placeholder="Optional" />
      </div>
    </div>

    <!-- Personality -->
    <div class="field">
      <label>Personality</label>
      <div class="pill-row" id="personality-pills"></div>
    </div>

    <div class="field">
      <label>Notes</label>
      <textarea id="cat-notes"></textarea>
    </div>

    <div class="button-row">
      <button class="btn-secondary" data-back="home">Cancel</button>
      <button class="btn-primary" id="btn-save-cat">Save</button>
    </div>
  </section>

  <!-- CAT LOGS -->
  <section class="screen" id="screen-cat-logs">
    <div class="back-link" data-back="home">‹ Back to Cats</div>
    <h2 id="logs-cat-name">Cat</h2>
    <div class="log-list" id="log-list"></div>
    <div class="fab" id="btn-add-log"></div>
  </section>

  <!-- ADD NEW LOG -->
  <section class="screen" id="screen-add-log">
    <div class="back-link" data-back="logs">‹ Back to Logs</div>
    <h2>New Log</h2>

    <div class="field">
      <label>Date</label>
      <input id="log-date" type="date" />
    </div>

    <div class="field">
      <label>Mood</label>
      <div class="pill-row">
        <div class="pill" data-mood="Happy">Happy</div>
        <div class="pill" data-mood="Neutral">Neutral</div>
        <div class="pill" data-mood="Sad">Sad</div>
      </div>
    </div>

    <div class="field">
      <label>Medication</label>
      <div class="pill-row">
        <div class="pill" data-med="Yes">Yes</div>
        <div class="pill" data-med="No">No</div>
      </div>
    </div>

    <div class="field">
      <label>Medication Details</label>
      <input id="log-meds" type="text" />
    </div>

    <div class="field">
      <label>Notes</label>
      <textarea id="log-notes"></textarea>
    </div>

    <div class="button-row">
      <button class="btn-secondary" data-back="logs">Cancel</button>
      <button class="btn-primary" id="btn-save-log">Save</button>
    </div>
  </section>
</div>

<script>
  const state = {
    cats: [],
    currentCatId: null,
    currentMood: null,
    currentMed: null
  };

  function showScreen(id) {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById(id).classList.add("active");
  }

  function getCurrentCat() {
    return state.cats.find(c => c.id === state.currentCatId) || null;
  }

  /* ------------------------- PERSONALITY ------------------------- */
  const personalityOptions = [
    "Shy","Playful","Relaxed","Independent",
    "Energetic","Affectionate","Curious","Quiet","Vocal","Calm"
  ];
  const personalityPillsContainer = document.getElementById("personality-pills");

  personalityOptions.forEach(option => {
    const pill = document.createElement("div");
    pill.className = "pill";
    pill.textContent = option;
    pill.dataset.personality = option;

    pill.addEventListener("click", () => pill.classList.toggle("selected"));
    personalityPillsContainer.appendChild(pill);
  });

  /* ------------------------- PHOTO UPLOAD ------------------------- */
  const previewBox = document.getElementById("cat-photo-preview");
  const chooseBtn = document.getElementById("choose-photo-btn");
  const photoInput = document.getElementById("cat-photo-input");

  chooseBtn.addEventListener("click", () => photoInput.click());

  photoInput.addEventListener("change", () => {
    const file = photoInput.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      previewBox.classList.remove("placeholder");
      previewBox.innerHTML = `<img src="${reader.result}" />`;
      previewBox.dataset.photo = reader.result;
    };
    reader.readAsDataURL(file);
  });

  /* ------------------------- RENDER CATS ------------------------- */
  function renderCats() {
    const container = document.getElementById("cat-list");
    container.innerHTML = "";

    if (state.cats.length === 0) {
      const empty = document.createElement("p");
      empty.textContent = "No foster cats yet. Tap + to add one.";
      empty.style.color = "#666";
      return container.appendChild(empty);
    }

    state.cats.forEach(cat => {
      const card = document.createElement("div");
      card.className = "cat-card";

      card.innerHTML = `
        <div class="thumb ${cat.photo ? "" : "placeholder"}">
          ${cat.photo ? `<img src="${cat.photo}">` : ""}
        </div>
        <div>
          <div class="cat-name">${cat.name}</div>
          <div class="cat-subinfo">
            ${cat.status} • ${cat.intakeDate || "No date"}
            ${cat.personality.length ? ` • ${cat.personality.join(", ")}` : ""}
          </div>
        </div>
        <button class="delete-btn">Delete</button>
      `;

      card.addEventListener("click", () => {
        state.currentCatId = cat.id;
        renderLogs();
        showScreen("screen-cat-logs");
      });

      card.querySelector(".delete-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        state.cats = state.cats.filter(c => c.id !== cat.id);
        renderCats();
      });

      container.appendChild(card);
    });
  }

  /* ------------------------- ADD CAT ------------------------- */
  document.getElementById("btn-add-cat").addEventListener("click", () => {
    document.getElementById("cat-name").value = "";
    document.getElementById("cat-status").value = "In Foster";
    document.getElementById("cat-intake").value = "";
    document.getElementById("cat-meds").value = "";
    document.getElementById("cat-notes").value = "";
    document.querySelectorAll("[data-personality]").forEach(p => p.classList.remove("selected"));

    previewBox.innerHTML = "";
    previewBox.classList.add("placeholder");
    previewBox.dataset.photo = "";

    showScreen("screen-add-cat");
  });

  document.getElementById("btn-save-cat").addEventListener("click", () => {
    const name = document.getElementById("cat-name").value.trim();
    if (!name) return alert("Please enter a name.");

    const selectedPersonalities =
      [...document.querySelectorAll("[data-personality].selected")].map(p => p.dataset.personality);

    const newCat = {
      id: Date.now().toString(),
      name,
      status: document.getElementById("cat-status").value,
      intakeDate: document.getElementById("cat-intake").value,
      medications: document.getElementById("cat-meds").value.trim(),
      notes: document.getElementById("cat-notes").value.trim(),
      personality: selectedPersonalities,
      photo: previewBox.dataset.photo || "",
      logs: []
    };

    state.cats.push(newCat);
    renderCats();
    showScreen("screen-home");
  });

  /* ------------------------- LOGS ------------------------- */
  function renderLogs() {
    const cat = getCurrentCat();
    const list = document.getElementById("log-list");
    list.innerHTML = "";

    document.getElementById("logs-cat-name").textContent = cat.name;

    if (cat.logs.length === 0) {
      const empty = document.createElement("p");
      empty.textContent = "No logs yet. Tap + to add one.";
      empty.style.color = "#666";
      return list.appendChild(empty);
    }

    cat.logs.slice().reverse().forEach((log, index) => {
      const card = document.createElement("div");
      card.className = "log-card";

      card.innerHTML = `
        <div class="log-title">Log ${cat.logs.length - index}</div>
        <div>${log.date}</div>
        <div>Mood: ${log.mood}</div>
        <div>Medication: ${log.medication}</div>
        ${log.notes ? `<div>${log.notes}</div>` : ""}
      `;

      list.appendChild(card);
    });
  }

  document.getElementById("btn-add-log").addEventListener("click", () => {
    const cat = getCurrentCat();
    if (!cat) return;

    state.currentMood = null;
    state.currentMed = null;

    document.querySelectorAll('.pill[data-mood]').forEach(p => p.classList.remove("selected"));
    document.querySelectorAll('.pill[data-med]').forEach(p => p.classList.remove("selected"));

    document.getElementById("log-date").value = "";
    document.getElementById("log-meds").value = "";
    document.getElementById("log-notes").value = "";

    showScreen("screen-add-log");
  });

  document.querySelectorAll('.pill[data-mood]').forEach(pill => {
    pill.addEventListener("click", () => {
      document.querySelectorAll('.pill[data-mood]').forEach(p => p.classList.remove("selected"));
      pill.classList.add("selected");
      state.currentMood = pill.dataset.mood;
    });
  });

  document.querySelectorAll('.pill[data-med]').forEach(pill => {
    pill.addEventListener("click", () => {
      document.querySelectorAll('.pill[data-med]').forEach(p => p.classList.remove("selected"));
      pill.classList.add("selected");
      state.currentMed = pill.dataset.med;
    });
  });

  document.getElementById("btn-save-log").addEventListener("click", () => {
    const cat = getCurrentCat();
    if (!cat) return;

    const newLog = {
      id: Date.now().toString(),
      date: document.getElementById("log-date").value,
      mood: state.currentMood,
      medication: state.currentMed,
      notes: document.getElementById("log-notes").value.trim()
    };

    cat.logs.push(newLog);
    renderLogs();
    showScreen("screen-cat-logs");
  });

  document.querySelectorAll("[data-back]").forEach(el => {
    el.addEventListener("click", () => {
      const target = el.dataset.back;
      if (target === "home") showScreen("screen-home");
      if (target === "logs") showScreen("screen-cat-logs");
    });
  });

  renderCats();
</script>

</body>
</html>
